# Pecan Pico 9 - A lightweight APRS tracker for balloons
This Project contains the Pecan Pico project in it's 9th version. A Pecan is a cheap lightweight APRS position tracker designed especially for small ballons which may fly for monthes. This tracker has been made in respect of weight, functionality and price because it's usually used once like a satellite. While the balloon can fly for a long time, this tracker is solar powered and recharges it's battery at daytime.

Other than usual position tracker, this tracker has also the ability to take pictures with a camera and send them to the ground. Therefore the APRS protocol has been extended by the SSDV protocol which can be received by any generic APRS receiver and some decoding software on the computer. SSDV can be also used with 2FSK (RTTY) but APRS may be used on the APRS network which provides APRS Igates. So you could make use of them and receive APRS messages from far away through the Internet. While the tracker has the ability to transmit 2GFSK (better known as 9k6 APRS), you may transmit pictures at a much higher rate. VGA sized pictures can be transmitted within minute.

![Pecan Pico 9a](pecanpico9a.jpg)<br>
*Pecan Pico 9a*

The biggest feature on this tracker is the camera OV2640. The camera can sample pictures up to UXGA but transmitting those still might take some time. The standard camera can be bought for roughly US$5 but it can be replaced by a wide angular camera which is available on the market too. Please don't expect high quality images. VGA sized pictures are okay but you might see the bad quality if you ramp up the resolution. Note that this tracker cannot save the pictures. That might be possible in theory but the chip (STM32F413) does only contain 1MB Flash memory and that might be enough for 20 pictures only.

![Airport Berlin Tempelhof](airport_tempelhof.jpg)<br>
*Closed Airport Berlin Tempelhof roughly 3km (10,000ft) altitude*

![Train station](train_station.jpg)<br>
*Test picture from the ground*

![Lakes in Poland](lakes_west_poland.jpg)<br>
*Lakes in East Poland (Myślibórz) at 8km (25,000ft) altitude, antenna and radar reflector in the picture*

![South East Berlin](south_east_berlin.jpg)<br>
*South East Berlin (Adlershof/Grünau) taken at roughly 5km (16,000ft) altitude*

The tracker can transmit pictures, GPS data and telemetry data simultanously. That means that the picture transmission can be interrupted and GPS data can be sent in between. While all data can be transmitted by APRS, there is only one decive being needed to receive all the data. APRS itself doesn't need any tuning (like RTTY) so receivers may be left unattended to operate automatically. Using APRS-IS (Igates) additionally reduces the risk of missing packets. If one station miss one packet, it could be received by a different station. All packets are put together and decoded on a central server.

The Pecan provides a ublox EVA-7M GPS chip which can operate up to 50km. This is important because regular GPS receivers operate usually only up to 18km (60,000ft) and balloons may fly higher. The EVA-7M can only receive GPS. It is possible to replace this chip with the pincompatible ublox EVA-M8M (at the PCB assembly) which can receive GLONASS and and the new European GNSS network Galileo too.

The PCB is powered by the sun on day and through a LiPO-battery on night. The battery itself is located on the backside and charged by solar cells on day. The PCB can also be powered through the USB connector. At night, temperatures can drop down to -50°C. At this temperature the battery might have such a high impedance, that the tracker might not work flawlessly (yet). A 300mAh to 500mAh battery should be enough capacity for powering the tracker at night. Some people insulate their tracker. But you may consider that insulation might not worth. There is not much heat generated by the PCB itself and so the tracker will cool down in the end anyway. You should also take into account that the tracker weights only ~~~20g (including the battery). So the insulation could weight a lot compared to the total weigth; and that might not worth it. Why? => The more the payload it has, the less altitude can be reached with a foil balloon.

The internal operation voltage of the microcontroller and transmitter is 1.8V. This voltage has been chosen while the microcontroller draws less power at low voltages. However USB requires 3V at least. If the Pecan is connected to a USB host (like a computer), the USB host will provide a GND connection through the USB ID pin. This pin originally signals the avability of a USB host (rather than a slave). On the Pecan this pin is connected to the buck converter which then ramps up the voltage to 3V. Connecting USB slaves to the Pecan is not possible because USB slaves do not connect their USB ID pin to GND and so the STM32 runs at 1.8V which is insufficient for USB.

The transmitter is based on a Si4063 which can do up to 100mW. It is able to transmit FSK, GFSK and OOK (On/Off-Keying). 2FSK is better known as RTTY and OOK as CW (morse). 2GFSK can be used for 9k6 APRS. APRS 1k2 which uses AFSK is archived by the 2GFSK modulation. The chip itself has never been intended to generate AFSK, but its possible. The Pecan has a 2m low pass filter (LPF), so it cannot transmit on the 70cm band. Transmitting at 70cm would be possible by the chip, if the LPF is replaced by a 70cm version. In general the Pecan does transmit 40mW, which should be enough for APRS operation. The limitation is a result of the low operating voltage of 1.8V. However it is possible to ramp up the operation voltage to 3V by the microcontroller itself and get up to 80mW.

To be continued...

Unsolved problems
=================

As mentioned before, the battery might freeze at night. LiPO's are already a good option and I don't know a battery which works better. LiPO's work best at warm temperatures (~~~20°C). At low temperatures the battery has a high internal resistance, which reduces the possible amount of current that can be used until the battery voltage drops too much. So what can we do? There are three options:

- Make the battery larger => Problem: It increases the total weight
- Heat the battery => Problem: It might need a larger battery to heat it all trough the night and that increases the total weight
- Draw less current

Option one and two are bad. Having more weight means that we can only fly at lower altitudes. The possibility to get into rain at a low altitude is much higher. Recovering the balloon from rain is impossible. It will descent to the gound, caught by a tree and it will never fly again.

So the only option is, to draw less current. Idling and a short APRS transmission is okay for the battery. Measuring the temperature, airpressure and humidity is okay too. However aquiring a GPS fix draws too much current.

Author
======

Please let me know if you have questions or ideas: sven.steudte@gmail.com

